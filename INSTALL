Thanks for downloading SNAFU.

------------------------------------------------------------------------------
REQUIREMENT :
------------------------------------------------------------------------------

For SNAFU webserver :
    - django >= 1.4.x
    - python >= 2.7.x
    - django-tracking
    - celery >= 3.0.x
    - django-celery >= 3.0.x
    - rabbitmq-server
    - pytz
    - MySQL, postgresql_psycopg2 or Oracle database (not SQLite)

For GLPI webserver :
    - glpi webservices >= 1.3.1
    - A valid user

For Nagios webserver :
    - A valid user

------------------------------------------------------------------------------
1. Start a new Django project and copy content of repository in this :
------------------------------------------------------------------------------

  $ django-admin.py startproject snafu
  
------------------------------------------------------------------------------
2. Configure your RabbitMQ server
------------------------------------------------------------------------------

  $ rabbitmqctl add_user youruser yourpassword
  $ rabbitmqctl add_vhost snafu
  $ rabbitmqctl set_permissions -p snafu youruser ".*" ".*" ".*"

------------------------------------------------------------------------------
3. Include followings in settings.py :
------------------------------------------------------------------------------

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.debug',
    'django.contrib.messages.context_processors.messages',
    'sendim.context_processors.sendim_context',
)

INSTALLED_APPS = (
    ...
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'sendim',
    'referentiel',
    'tracking',
    'djcelery',
    ...
)

MIDDLEWARE_CLASSES = (
    ...
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'tracking.middleware.VisitorTrackingMiddleware',
    'tracking.middleware.VisitorCleanUpMiddleware',
    'sendim.middleware.CeleryMessageMiddleware',
    'sendim.middleware.SnafuRequirementMiddleware',
    ...
)

import os
BASEDIR = os.path.dirname(os.path.abspath(__file__))

from sendim.local_settings import *

import djcelery
djcelery.setup_loader()

BROKER_HOST = "localhost"
BROKER_PORT = 5672
BROKER_USER = "youruser"
BROKER_PASSWORD = "youpassword"
BROKER_VHOST = "snafu"

------------------------------------------------------------------------------
4. Include followings in sendim/local_settings.py :
------------------------------------------------------------------------------

from django.conf import settings
import os

SNAFU = {
    'glpi-url':'https://mywebiste/glpi/',
    'glpi-xmlrpc':'https://mywebsite/glpi/plugins/webservices/xmlrpc.php',
    'glpi-login':'Foo',
    'glpi-password':'B@r',
    'smtp-from':"foobar@raboof.com",
#    If you need a password 
#   'smtp-password':"r@b0OF"
    'smtp-server':'12.3.19.83',
    'smtp-port':25

}

LOGIN_URL = '/snafu/login'

TEMPLATE_DIRS = ( os.path.join(settings.BASEDIR, 'sendim/templates'), )

------------------------------------------------------------------------------
5. Include followings in snafu/urls.py
------------------------------------------------------------------------------

urlpatterns = patterns('',
   ...
   url(r'^snafu/', include('sendim.urls')),
   ...
)

------------------------------------------------------------------------------
6. After configuration launch the next command for initialize database :
Be sure to have a valid user account on GLPI webservice before run 'populate'.
------------------------------------------------------------------------------

  $ ./manage.py syncdb
  $ ./manage.py populate


------------------------------------------------------------------------------
7. Launch SNAFU
------------------------------------------------------------------------------
Before work with SNAFU you must add some stuff:
 - A supervisor
 - A mail group
 - A mail type

You can use administration interface at '/admin' or at '/snafu/configuration'.
